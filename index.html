<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>‡∏û‡∏•‡∏¥‡∏Å‡πÇ‡∏â‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏î‡πâ‡∏ß‡∏¢ AI ‚Äî ‡∏ã‡πà‡∏≠‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥ (MEA‚ÄëSPU) Quiz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--pri:#7c3aed;--sec:#22d3ee;--ok:#10b981;--bad:#ef4444;--bg:#0b1020}
    html,body{height:100%}
    body{font-family:'Kanit',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:radial-gradient(1200px 600px at 10% -10%,#1f1455 0%,#0b1020 60%,#050812 100%) fixed;color:#e6e9f5}
    .glass{backdrop-filter: blur(10px); background:linear-gradient(180deg,rgba(255,255,255,0.08),rgba(255,255,255,0.04)); border:1px solid rgba(255,255,255,0.12)}
    .btn{display:block;width:100%;padding:14px 18px;border-radius:1rem;border:1px solid rgba(255,255,255,.2);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.04));}
    .btn:hover{transform:translateY(-1px);}
    .choice{transition:transform .08s ease, background .2s ease}
    .choice.correct{background:linear-gradient(180deg, rgba(16,185,129,.25), rgba(16,185,129,.15)); border-color: rgba(16,185,129,.6)}
    .choice.wrong{background:linear-gradient(180deg, rgba(239,68,68,.25), rgba(239,68,68,.15)); border-color: rgba(239,68,68,.6)}
    .timerbar{height:10px;border-radius:999px;background:linear-gradient(90deg,var(--sec),#34d399,#f59e0b,#ef4444)}
    .flash{animation:flash .5s ease}
    @keyframes flash{0%{box-shadow:0 0 0 0 rgba(124,58,237,.8)}100%{box-shadow:0 0 0 20px rgba(124,58,237,0)}}
  </style>
</head>
<body>
  <div class="min-h-full p-4 sm:p-6">
    <header class="glass rounded-2xl p-4 sm:p-6 mb-4 sm:mb-6">
      <div class="flex items-center justify-between gap-3">
        <div class="flex-1">
          <h1 class="text-2xl sm:text-4xl font-extrabold leading-tight">
            ‡∏û‡∏•‡∏¥‡∏Å‡πÇ‡∏â‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏î‡πâ‡∏ß‡∏¢ <span class="text-[var(--sec)]">AI</span> ‚Äî ‡∏ã‡πà‡∏≠‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥
          </h1>
          <p class="text-sm sm:text-base opacity-80 mt-1">Showcase (MEA‚ÄëSPU) ‚Ä¢ ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ <strong>‡∏ú‡∏®.‡∏î‡∏£.‡∏†‡∏£‡∏ä‡∏±‡∏¢ ‡∏à‡∏π‡∏≠‡∏ô‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡∏Å‡∏∏‡∏•</strong></p>
        </div>
        <div class="shrink-0 text-right">
          <button id="musicToggle" class="btn text-sm sm:text-base">üîä ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á</button>
          <button id="sfxToggle" class="btn mt-2 text-sm sm:text-base">üéß ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå</button>
        </div>
      </div>
    </header>

    <main class="grid lg:grid-cols-3 gap-4 sm:gap-6">
      <!-- Left: Controls -->
      <section class="glass rounded-2xl p-4 sm:p-6 lg:col-span-1">
        <h2 class="text-xl sm:text-2xl font-bold mb-2">üéÆ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ</h2>
        <p class="text-sm opacity-80 mb-4">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Ä¢ ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ <b>45 ‡∏ß‡∏¥</b> ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠ ‚Ä¢ ‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏Å‡∏•‡πâ <b>1,000</b> ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠</p>

        <label class="block text-base mb-2">‡πÇ‡∏´‡∏°‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå</label>
        <div class="grid grid-cols-2 gap-2">
          <button data-mode="Easy" class="btn mode">üç≠ Easy (5 ‡∏Ç‡πâ‡∏≠)</button>
          <button data-mode="Medium" class="btn mode">‚öôÔ∏è Medium (5 ‡∏Ç‡πâ‡∏≠)</button>
          <button data-mode="Hard" class="btn mode">üõ†Ô∏è Hard (5 ‡∏Ç‡πâ‡∏≠)</button>
          <button data-mode="Mixed" class="btn mode">üåÄ Mixed (10 ‡∏Ç‡πâ‡∏≠)</button>
        </div>

        <div class="mt-6">
          <label class="block text-base mb-2">‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö‡πÇ‡∏™‡∏Å‡∏£‡∏≤‡∏ï‡∏¥‡∏™ (Socrates)</label>
          <p class="text-sm opacity-80">‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡∏ß‡πà‡∏≤ <em>‚Äú‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ?‚Äù</em> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏ß‡∏ô‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</p>
        </div>

        <div class="mt-6">
          <h3 class="font-bold mb-2">üèÜ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
          <div class="grid grid-cols-2 gap-2 text-center">
            <div class="glass rounded-xl p-3">
              <div class="text-3xl font-extrabold" id="score">0</div>
              <div class="text-xs opacity-80">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
            </div>
            <div class="glass rounded-xl p-3">
              <div class="text-3xl font-extrabold" id="streak">0üî•</div>
              <div class="text-xs opacity-80">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</div>
            </div>
          </div>
          <button id="resetBtn" class="btn mt-3">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏° ‚ôªÔ∏è</button>
        </div>

        <div class="mt-6">
          <h3 class="font-bold mb-2">üìö ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</h3>
          <ul class="text-sm leading-relaxed list-disc ml-5 opacity-90">
            <li>‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á EVSE: <b>MPESTD‚Äë001:2563</b> (MEA/PEA/‡∏Å‡∏Å‡∏û)</li>
            <li>‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏≠‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏∏: <b>MEA 2560</b></li>
            <li>IEC 61851, IEC 62196, IEC 62423 (RCD Type B), IEC 62955 (RDC‚ÄëDD)</li>
            <li>‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢ <b>IEC 01 (THW)</b> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏†‡∏≤‡∏Ñ‡∏™‡∏ô‡∏≤‡∏°</li>
          </ul>
        </div>
      </section>

      <!-- Right: Gameplay -->
      <section class="glass rounded-2xl p-4 sm:p-6 lg:col-span-2">
        <div class="flex items-center justify-between gap-3 mb-3">
          <div class="flex items-center gap-3">
            <span class="text-sm opacity-80">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà</span>
            <span id="qIndex" class="text-2xl font-extrabold">0</span>
            <span class="opacity-60">/</span>
            <span id="qTotal" class="text-xl">0</span>
          </div>
          <div class="flex-1 mx-4">
            <div class="w-full bg-white/10 rounded-full overflow-hidden">
              <div id="timerBar" class="timerbar" style="width:100%"></div>
            </div>
            <div class="text-right text-xs opacity-70 mt-1"><span id="secLeft">45</span>s</div>
          </div>
          <div class="text-right">
            <div class="text-xs opacity-70">‡πÇ‡∏´‡∏°‡∏î</div>
            <div id="modeLabel" class="text-lg font-bold">‚Äî</div>
          </div>
        </div>

        <div id="card" class="rounded-2xl p-4 sm:p-6 bg-white/5">
          <div id="stemWrap">
            <h2 id="stem" class="text-xl sm:text-2xl font-bold leading-snug">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ‚ú®</h2>
            <p class="text-sm opacity-80 mt-2">‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô MEA ‚Ä¢ IEC ‚Ä¢ IEEE + ‡∏†‡∏≤‡∏Ñ‡∏™‡∏ô‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á ‚Äî ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Wall Charger ‡πÇ‡∏´‡∏°‡∏î 3 (1‡πÄ‡∏ü‡∏™ ‚â§7.4kW, 3‡πÄ‡∏ü‡∏™ ‚â§11kW)</p>
          </div>

          <div id="choices" class="grid gap-2 mt-4"></div>

          <div id="actions" class="mt-4 hidden">
            <button id="hintBtn" class="btn">üí° ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ</button>
            <button id="whyBtn" class="btn mt-2">ü§î ‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ?</button>
          </div>

          <div id="feedback" class="mt-4 hidden">
            <div id="resultText" class="text-lg font-bold"></div>
            <div id="explain" class="text-sm opacity-90 mt-2 leading-relaxed"></div>
            <div id="ref" class="text-xs opacity-70 mt-1"></div>
            <button id="nextBtn" class="btn mt-4">‚û°Ô∏è ‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-center opacity-70 text-xs">
      ¬© 2025 MEA‚ÄëSPU ‚Ä¢ Active Learning with AI ‚Äî Designed for Thai Gen Z üì±‚ö°
    </footer>
  </div>

  <!-- PROFILE (Google Sheets) -->
  <div class="fixed inset-0 z-50 hidden items-center justify-center p-4" id="profileWrap">
    <div class="glass max-w-xl w-full rounded-2xl p-5">
      <h2 class="text-2xl font-extrabold mb-1">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô & ‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°</h2>
      <p class="opacity-80 text-sm mb-3">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡∏á Google Sheets (MEA‚ÄëSPU)</p>
      <div class="grid gap-2">
        <label class="text-sm">‡∏ä‡∏∑‡πà‡∏≠‚Äë‡∏™‡∏Å‡∏∏‡∏• <input id="pf_name" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></label>
        <label class="text-sm">‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô <input id="pf_org" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"></label>
        <label class="text-sm">‡∏≠‡∏µ‡πÄ‡∏°‡∏• <input id="pf_email" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="name@example.com"></label>
        <label class="text-sm">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå <input id="pf_phone" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="08x-xxx-xxxx"></label>
        <label class="text-sm flex items-center gap-2"><input type="checkbox" id="pf_consent" class="scale-125"> ‚úÖ ‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</label>
      </div>
      <div class="grid grid-cols-2 gap-2 mt-4">
        <button class="btn" id="pf_cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button class="btn" id="pf_save">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å & ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
      </div>
      <p class="text-xs opacity-60 mt-3">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Apps Script Web App URL ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ <code>SHEET_WEBAPP_URL</code> ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ</p>
    </div>
  </div>

  <script>
    // ====== Google Sheets endpoint ======
    // üëâ ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå Web App ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡πÄ‡∏õ‡∏£‡∏î‡∏ä‡∏µ‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ /exec)
    const SHEET_WEBAPP_URL = ""; // e.g. "https://script.google.com/macros/s/AKfycbx.../exec"

    // ====== Simple WebAudio background music & SFX ======
    const audio = {
      ctx:null, musicGain:null, sfxGain:null, musicOn:true, sfxOn:true,
      ensure(){ if(!this.ctx){ this.ctx = new (window.AudioContext||window.webkitAudioContext)(); this.musicGain=this.ctx.createGain(); this.sfxGain=this.ctx.createGain(); this.musicGain.gain.value=.25; this.sfxGain.gain.value=.6; this.musicGain.connect(this.ctx.destination); this.sfxGain.connect(this.ctx.destination);} },
      beep(type='ok'){ if(!this.sfxOn) return; this.ensure(); const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.connect(g); g.connect(this.sfxGain); o.type= type==='ok'? 'triangle':'square'; o.frequency.setValueAtTime(type==='ok'?880:220,this.ctx.currentTime); g.gain.setValueAtTime(.001,this.ctx.currentTime); g.gain.exponentialRampToValueAtTime(.5,this.ctx.currentTime+.01); g.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.2); o.start(); o.stop(this.ctx.currentTime+.21); },
      boom(){ if(!this.sfxOn) return; this.ensure(); const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.connect(g); g.connect(this.sfxGain); o.type='sawtooth'; o.frequency.setValueAtTime(200,this.ctx.currentTime); o.frequency.exponentialRampToValueAtTime(60,this.ctx.currentTime+.3); g.gain.setValueAtTime(.6,this.ctx.currentTime); g.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.35); o.start(); o.stop(this.ctx.currentTime+.36); },
      music(){ if(!this.musicOn) return; this.ensure(); // chill arpeggio loop
        const root=220; const seq=[0,4,7,12,7,4]; let i=0; const play=()=>{ if(!this.musicOn) return; const now=this.ctx.currentTime; const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.type='sine'; o.frequency.value=root*Math.pow(2,seq[i%seq.length]/12); g.gain.value=.0001; o.connect(g); g.connect(this.musicGain); o.start(now); g.gain.exponentialRampToValueAtTime(.08, now+.01); g.gain.exponentialRampToValueAtTime(.0001, now+.45); o.stop(now+.5); i++; setTimeout(play, 480); }; play(); }
    };

    const musicBtn=document.getElementById('musicToggle');
    const sfxBtn=document.getElementById('sfxToggle');
    musicBtn.addEventListener('click',()=>{ audio.musicOn=!audio.musicOn; musicBtn.textContent = audio.musicOn? 'üîä ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á':'üîá ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á'; if(audio.musicOn){ audio.music(); }});
    sfxBtn.addEventListener('click',()=>{ audio.sfxOn=!audio.sfxOn; sfxBtn.textContent = audio.sfxOn? 'üéß ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå':'üö´ ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå'; });
    // kick music on first interaction
    window.addEventListener('pointerdown',()=>{ audio.music(); },{once:true});

    // ====== Quiz Data (Thai) ======
    // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠ = Math.round(1000 * (‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠/45))
    const QUESTIONS = [
      // Easy (5)
      {id:'E1', level:'Easy', stem:'‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏ü‡πÉ‡∏´‡πâ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á RCD ‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å?', choices:['Type A','Type B','Type AC','‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô'], answer:1, hint:'‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ï‡∏£‡∏á‡∏£‡∏±‡πà‡∏ß‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö DC', explain:'‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ RCD Type B (IŒîn ‚â§ 30 mA) ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Type A/F ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö RDC‚ÄëDD ‚â•6 mA ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠ Type B', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.1 ‡∏Ç) ; IEC 62423, IEC 62955'},
      {id:'E2', level:'Easy', stem:'‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î 2/3 ‡∏Ñ‡∏ß‡∏£‡∏™‡∏π‡∏á‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?', choices:['0.3‚Äì0.6 ‡∏°.','‚â•0.75 ‡∏°. ‡πÅ‡∏ï‡πà ‚â§1.2 ‡∏°.','‚â•1.5 ‡∏°.','‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î'], answer:1, hint:'‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', explain:'‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏π‡∏á‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏à‡∏≠‡∏î‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 0.75 ‡πÄ‡∏°‡∏ï‡∏£ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1.2 ‡πÄ‡∏°‡∏ï‡∏£', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.7, 5.15'},
      {id:'E3', level:'Easy', stem:'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏™‡∏≤‡∏¢‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏∏‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (AC) ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£?', choices:['5 ‡∏°.','7.5 ‡∏°.','10 ‡∏°.','‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏°.'], answer:1, hint:'‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô', explain:'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏™‡∏≤‡∏¢‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡∏¥‡∏ô 7.5 ‡πÄ‡∏°‡∏ï‡∏£', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 6.5 / MEA 5.14'},
      {id:'E4', level:'Easy', stem:'‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏π‡∏ì‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['√ó1.10','√ó1.25','√ó1.50','√ó2.00'], answer:1, hint:'‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢ EVSE', explain:'‡∏™‡∏≤‡∏¢‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 1.25 ‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ EVSE', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.4 / MEA 5.3'},
      {id:'E5', level:'Easy', stem:'‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏™‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EVSE ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏î?', choices:['‡πÄ‡∏î‡∏¥‡∏ô‡∏•‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏¢','‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡∏ù‡∏±‡∏á‡∏î‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á','‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ï‡πâ‡∏û‡∏£‡∏°','‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ô‡πÄ‡∏û‡∏î‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠'], answer:1, hint:'‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', explain:'‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡∏ù‡∏±‡∏á‡∏î‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.8'},

      // Medium (5)
      {id:'M1', level:'Medium', stem:'‡∏ñ‡πâ‡∏≤ EVSE 1 ‡πÄ‡∏ü‡∏™ 7.4 kW, pf‚âà1 ‡∏ó‡∏µ‡πà 230 V ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['16 A','25 A','32 A','40 A'], answer:2, hint:'I = P/(‚àö3 V LL pf) ‡πÉ‡∏ä‡πâ 1 ‡πÄ‡∏ü‡∏™ = P/(V pf)', explain:'1 ‡πÄ‡∏ü‡∏™: I=P/(V¬∑pf)=7400/(230√ó1) ‚âà 32.17 A ‚áí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î 32 A', ref:'‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á 1 ‡πÄ‡∏ü‡∏™ / pf ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÅ‡∏°‡πâ pf‚âà1'},
      {id:'M2', level:'Medium', stem:'‡∏à‡∏≤‡∏Å M1 ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î IEC 01 (THW) ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á ‡∏Ç‡∏ô‡∏≤‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏µ‡πà‡∏ï‡∏£.‡∏°‡∏°. (‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà2)?', choices:['2.5 ‡∏ï‡∏£.‡∏°‡∏°. (21A)','4 ‡∏ï‡∏£.‡∏°‡∏°. (28A)','6 ‡∏ï‡∏£.‡∏°‡∏°. (36A)','10 ‡∏ï‡∏£.‡∏°‡∏°. (50A)'], answer:3, hint:'‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏° √ó1.25 ‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á', explain:'I‡∏à‡∏£‡∏¥‡∏á‚âà32 A ‚áí ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏≤‡∏¢ ‚â•1.25√ó32 ‚âà 40 A. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01 (‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á) 6 ‡∏ï‡∏£.‡∏°‡∏°. ~36A ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠ ‚áí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 10 ‡∏ï‡∏£.‡∏°‡∏°. 50A ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå', ref:'‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01 (THW) ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà2 ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á'},
      {id:'M3', level:'Medium', stem:'‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Demand factor ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['0.8','0.9','1.0','‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö'], answer:2, hint:'‡πÇ‡∏´‡∏•‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°', explain:'‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Demand factor = 1 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢ EVSE', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.5 / MEA 5.4'},
      {id:'M4', level:'Medium', stem:'‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏¢‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≥‡∏à‡∏≤‡∏Å ‡∏Å‡∏ü‡∏ô. ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EV Load ‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏î?', choices:['TN‚ÄëC','TN‚ÄëC‚ÄëS ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°','TT (‡πÅ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°)','IT'], answer:2, hint:'‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ô‡∏¥‡∏ß‡∏ó‡∏£‡∏±‡∏•', explain:'‡∏Å‡∏£‡∏ì‡∏µ‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≥‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡πÅ‡∏ö‡∏ö TT ‡πÅ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏≠‡∏¥‡∏™‡∏£‡∏∞', ref:'MEA 5.11.1 ; MPESTD‚Äë001 ‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å ‡∏Ç.'},
      {id:'M5', level:'Medium', stem:'‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö TT ‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏Ñ‡∏ß‡∏£‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['0.5 ‡∏°.','1.0 ‡∏°.','2.0 ‡∏°.','5.0 ‡∏°.'], answer:2, hint:'‡∏î‡∏π‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Earthing TT', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 2.0 ‡πÄ‡∏°‡∏ï‡∏£', ref:'MEA 5.11.1 ; MPESTD‚Äë001 ‡∏Ç‡πâ‡∏≠ 4.2.1 (1) ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô ‚â•2.0 ‡∏°.'},

      // Hard (5)
      {id:'H1', level:'Hard', stem:'‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á RCD Type B ‡∏ã‡πâ‡∏≠‡∏ô‡πÉ‡∏ï‡πâ‡πÄ‡∏°‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ RCD Type A ‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', choices:['‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ','‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡πÉ‡∏ï‡πâ RCD ‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏°‡∏ô','‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤ IŒîn ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô','‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏´‡∏•‡∏î <32A'], answer:1, hint:'‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á RCD ‡∏ï‡πà‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î', explain:'‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤ RCD Type B ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏ß‡∏á‡∏à‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ RCD Type ‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏ô‡∏±‡πâ‡∏ô ‡πÜ', ref:'MPESTD‚Äë001:2563 ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ ‡∏Ç‡πâ‡∏≠ 3.1 ‡∏Ç) (3.)'},
      {id:'H2', level:'Hard', stem:'‡∏Å‡∏£‡∏ì‡∏µ TN‚ÄëC‚ÄëS ‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏Ç‡πâ‡∏≠‡πÉ‡∏î ‚Äú‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‚Äù ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö?', choices:['‡∏Ñ‡∏∏‡∏° touch voltage >70V ‡∏ï‡∏±‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5s','‡∏•‡∏î‡∏Ñ‡πà‡∏≤ Rearth ‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î','‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á U/O‚ÄëV protection ‡πÅ‡∏ó‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)','‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°'], answer:3, hint:'‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Ñ‡∏∑‡∏≠‚Ä¶', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠ 4.2.2 ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô‡∏î‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5s ‡∏Ø‡∏•‡∏Ø ‡∏Å‡∏≤‡∏£ ‚Äú‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‚Äù ‡∏Ç‡∏±‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 4.2.2'},
      {id:'H3', level:'Hard', stem:'‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á RCD ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô/‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏ï‡∏≤‡∏° MPESTD‚Äë001 ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏∏‡∏Å‡∏Å‡∏µ‡πà‡πÄ‡∏î‡∏∑‡∏≠‡∏ô?', choices:['‡∏ó‡∏∏‡∏Å 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ó‡∏∏‡∏Å 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ó‡∏∏‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ó‡∏∏‡∏Å 12 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'], answer:2, hint:'MPESTD vs MEA ‡∏Ñ‡∏ô‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏ö‡∏ó', explain:'MPESTD‚Äë001 ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏∏‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏õ‡∏∏‡πà‡∏° Test) ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ MEA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÄ‡∏ä‡∏¥‡∏á‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.11 ; MEA 5.20'},
      {id:'H4', level:'Hard', stem:'Wall Charger ‡πÇ‡∏´‡∏°‡∏î 3 ‡∏™‡∏≤‡∏°‡πÄ‡∏ü‡∏™ 11 kW ‡∏ó‡∏µ‡πà 400 V, pf‚âà1 ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ï‡πà‡∏≠‡πÄ‡∏ü‡∏™‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏£‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á?', choices:['I‚âà16 A/phase, MCB 16 A','I‚âà32 A/phase, MCB 32 A','I‚âà20 A/phase, MCB 20 A','I‚âà25 A/phase, MCB 25 A'], answer:0, hint:'‡∏™‡∏≤‡∏°‡πÄ‡∏ü‡∏™‡πÉ‡∏ä‡πâ I=P/(‚àö3¬∑V¬∑pf)', explain:'I = 11000/(‚àö3√ó400√ó1) ‚âà 15.9 A ‚áí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏û‡∏¥‡∏Å‡∏±‡∏î 16 A', ref:'‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≤‡∏°‡πÄ‡∏ü‡∏™ + pf ‡∏£‡∏ß‡∏°‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£'},
      {id:'H5', level:'Hard', stem:'‡∏à‡∏≤‡∏Å H4 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢ IEC 01 (THW) ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠?', choices:['2.5 ‡∏ï‡∏£.‡∏°‡∏°. (21A) ‡∏ú‡πà‡∏≤‡∏ô √ó1.25','4 ‡∏ï‡∏£.‡∏°‡∏°. (28A) ‡∏ú‡πà‡∏≤‡∏ô √ó1.25','1.5 ‡∏ï‡∏£.‡∏°‡∏°. (15A) ‡∏û‡∏≠','6 ‡∏ï‡∏£.‡∏°‡∏°. (36A) ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô'], answer:1, hint:'‡∏Ñ‡∏¥‡∏î I‡∏à‡∏£‡∏¥‡∏á√ó1.25 ‡∏Å‡πà‡∏≠‡∏ô', explain:'I‡∏à‡∏£‡∏¥‡∏á‚âà16 A ‚áí ‡∏ï‡πâ‡∏≠‡∏á ‚â•1.25√ó16=20 A. 2.5 ‡∏ï‡∏£.‡∏°‡∏°. 21A ‡∏û‡∏≠‡πÄ‡∏ú‡∏∑‡πà‡∏≠ ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠ margin/‡∏™‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á ‡∏ô‡∏¥‡∏¢‡∏° 4 ‡∏ï‡∏£.‡∏°‡∏°. 28A ‡∏à‡∏∂‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏ß‡πà‡∏≤', ref:'‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01 (THW) ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà2 (‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á)'},

      // Mixed pool (10)
      {id:'X1', level:'Mixed', stem:'‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô surge ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', choices:['‡∏Ñ‡∏ß‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏µ','‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô','‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á','‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á'], answer:0, hint:'‡∏™‡∏†‡∏≤‡∏û‡∏ü‡πâ‡∏≤‡∏ú‡πà‡∏≤/‡πÄ‡∏´‡∏ô‡∏µ‡πà‡∏¢‡∏ß‡∏ô‡∏≥', explain:'‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ç‡∏ì‡∏∞ (Surge protection) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 6.6'},
      {id:'X2', level:'Mixed', stem:'‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏´‡∏±‡∏ß‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?', choices:['‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏û‡∏≠','‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ OCP & RCD ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≠‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö built‚Äëin','‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏ß‡∏™‡πå‡∏£‡∏ß‡∏°','‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'], answer:1, hint:'‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á selectivity', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏Å‡∏¥‡∏ô‡πÅ‡∏•‡∏∞ RCD ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢ ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏î‡πâ‡∏ß‡∏¢', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 6.2'},
      {id:'X3', level:'Mixed', stem:'‡πÇ‡∏´‡∏°‡∏î 2 ‡πÉ‡∏ä‡πâ‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏û‡∏Å‡∏û‡∏≤‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', choices:['‡πÑ‡∏î‡πâ','‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ','‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤ ‚â§10A','‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏ä‡πà‡∏≤‡∏á'], answer:1, hint:'portable socket‚Äëoutlet?', explain:'‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ä‡∏ô‡∏¥‡∏î‡∏´‡∏¢‡∏¥‡∏ö‡∏¢‡∏Å‡πÑ‡∏î‡πâ (Portable socket‚Äëoutlet) ‡∏à‡πà‡∏≤‡∏¢ EVSE', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 5.4'},
      {id:'X4', level:'Mixed', stem:'‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‚ÄúEV connecting point ‚Ä¶A, ‚Ä¶kW (MAX.)‚Äù ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡πÉ‡∏î?', choices:['‡πÇ‡∏´‡∏°‡∏î 2 ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö','‡πÇ‡∏´‡∏°‡∏î 4 DC','‡∏´‡∏°‡πâ‡∏≠‡πÅ‡∏õ‡∏•‡∏á','‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á'], answer:0, hint:'‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏ô‡∏õ‡πâ‡∏≤‡∏¢', explain:'‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î 2 ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 10/‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà 4', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 5.5‚Äë5.6'},
      {id:'X5', level:'Mixed', stem:'‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏™‡∏≤‡∏¢‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏á‡∏à‡∏£ (derating) ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?', choices:['2 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.85','3 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.95','4 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.90','9‚Äë20 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.90'], answer:0, hint:'‡∏à‡∏≥‡∏ï‡∏≤‡∏£‡∏≤‡∏á 1', explain:'‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: 2 ‡∏ß‡∏á‡∏à‡∏£ 0.85; 3 ‡∏ß‡∏á‡∏à‡∏£ 0.79; 4 ‡∏ß‡∏á‡∏à‡∏£ 0.75; 9‚Äë20 ‡∏ß‡∏á‡∏à‡∏£ 0.70', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.9.2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà 1'},
      {id:'X6', level:'Mixed', stem:'‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ TN‚ÄëC‚ÄëS ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥ TT ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡πÇ‡∏•‡∏´‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≠‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢?', choices:['1.0 ‡∏°.','2.5 ‡∏°.','5.0 ‡∏°.','‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î'], answer:1, hint:'touch potential', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡πÇ‡∏•‡∏´‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≠‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‚â•2.5 ‡∏°. ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏´‡πà‡∏≤‡∏á ‚â•2.0 ‡∏°.', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 4.2.1 (1) ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 9'},
      {id:'X7', level:'Mixed', stem:'‡πÇ‡∏´‡∏•‡∏î EVSE ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Demand factor?', choices:['0.5','0.75','1.0','‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÄ‡∏ô‡∏≠‡∏£‡πå'], answer:2, hint:'‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢', explain:'‡∏Å‡∏≥‡∏´‡∏ô‡∏î Demand factor = 1 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≤‡∏¢‡∏õ‡πâ‡∏≠‡∏ô/‡∏™‡∏≤‡∏¢‡πÄ‡∏°‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.5'},
      {id:'X8', level:'Mixed', stem:'IC‚ÄëCPD ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î 2 ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà?', choices:['‡πÅ‡∏Ñ‡πà‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤','‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏≤‡∏¢','‡∏ß‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô','‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡∏ô‡∏´‡∏°‡πâ‡∏≠‡πÅ‡∏õ‡∏•‡∏á'], answer:1, hint:'‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏° In‚Äëcable control and protection device', explain:'IC‚ÄëCPD ‡∏Ñ‡∏∑‡∏≠‡∏ä‡∏∏‡∏î‡∏™‡∏≤‡∏¢/‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÉ‡∏ô‡∏™‡∏≤‡∏¢ ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 2.3, 2.7‚Äë2.8'},
      {id:'X9', level:'Mixed', stem:'EVSE ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?', choices:['‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô','‡∏Ñ‡∏ß‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°','‡πÉ‡∏ä‡πâ‡∏ã‡∏¥‡∏•‡∏¥‡πÇ‡∏Ñ‡∏ô‡∏û‡∏≠','‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á'], answer:1, hint:'‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°', ref:'MEA 5.16 ; MPESTD‚Äë001 ‡∏Ç‡πâ‡∏≠ 3.10'},
      {id:'X10', level:'Mixed', stem:'‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏£‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ ‚Äú‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™‚Äù ‡∏´‡∏•‡∏±‡∏Å‡πÑ‡∏´‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?', choices:['‡∏î‡∏π‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô','‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤','‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™ I ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á + ‡πÄ‡∏ú‡∏∑‡πà‡∏≠ √ó1.25','‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏±‡∏ô‡πÇ‡∏¢‡∏Å'], answer:2, hint:'‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏£‡∏¥‡∏á', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏Ç‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏ã‡∏∂‡πà‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å I‡∏à‡∏£‡∏¥‡∏á√ó1.25 ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01)', ref:'‡πÅ‡∏ô‡∏ß‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢ EVSE ‡∏ï‡∏≤‡∏° MPESTD & ‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01'}
    ];

    // ====== Utility ======
    function pickByLevel(level){
      if(level==='Mixed'){
        const pool=QUESTIONS.filter(q=>q.level!=='Easy'&&q.level!=='Medium'&&q.level!=='Hard');
        // ‡∏´‡∏≤‡∏Å pool ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö 10 ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠
        const base = pool.length>=10? pool : [...QUESTIONS];
        return shuffle(base).slice(0,10);
      }
      return QUESTIONS.filter(q=>q.level===level).slice(0,5);
    }
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }

    // ====== Game State ======
    let mode='‚Äî', paper=[], idx=0, timer=null, tLeft=45, score=0, streak=0, answered=false;

    const qIndexEl=document.getElementById('qIndex');
    const qTotalEl=document.getElementById('qTotal');
    const modeLabel=document.getElementById('modeLabel');
    const timerBar=document.getElementById('timerBar');
    const secLeft=document.getElementById('secLeft');
    const stemEl=document.getElementById('stem');
    const choicesEl=document.getElementById('choices');
    const actions=document.getElementById('actions');
    const hintBtn=document.getElementById('hintBtn');
    const whyBtn=document.getElementById('whyBtn');
    const feedback=document.getElementById('feedback');
    const resultText=document.getElementById('resultText');
    const explain=document.getElementById('explain');
    const refEl=document.getElementById('ref');
    const nextBtn=document.getElementById('nextBtn');
    const scoreEl=document.getElementById('score');
    const streakEl=document.getElementById('streak');

    document.querySelectorAll('.mode').forEach(b=>b.addEventListener('click',()=>startOrProfile(b.dataset.mode)));

    // ====== Profile helpers ======
    function getProfile(){ try{ return JSON.parse(localStorage.getItem('mea_profile')||'{}'); }catch{ return {}; } }
    function saveProfile(p){ localStorage.setItem('mea_profile', JSON.stringify(p||{})); }
    function needProfile(){ const p=getProfile(); return !p.name || !p.org || !p.email || !p.consent; }
    function fillProfileForm(){ const p=getProfile(); const g=id=>document.getElementById(id); ['name','org','email','phone'].forEach(k=>{ const el=g('pf_'+k); if(el) el.value=p[k]||''; }); const c=g('pf_consent'); if(c) c.checked=!!p.consent; }
    function readProfileForm(){ const g=id=>document.getElementById(id); return { name:g('pf_name')?.value.trim(), org:g('pf_org')?.value.trim(), email:g('pf_email')?.value.trim(), phone:g('pf_phone')?.value.trim(), consent: !!g('pf_consent')?.checked }; }
    function validateProfile(p){ return !!(p.name && p.org && p.email && p.consent); }

    function startOrProfile(selMode){
      if(selMode) mode = selMode; // remember wished mode
      if(needProfile()){
        fillProfileForm();
        document.getElementById('profileWrap').classList.remove('hidden');
        document.getElementById('profileWrap').classList.add('flex');
      }else{
        start(mode);
      }
    }

    document.getElementById('pf_cancel').onclick=()=>{
      document.getElementById('profileWrap').classList.add('hidden');
      document.getElementById('profileWrap').classList.remove('flex');
    };
    document.getElementById('pf_save').onclick=()=>{
      const p=readProfileForm();
      if(!validateProfile(p)){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å ‡∏ä‡∏∑‡πà‡∏≠‚Äë‡∏™‡∏Å‡∏∏‡∏• / ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î / ‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡πä‡∏Å‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°'); return; }
      saveProfile(p);
      document.getElementById('profileWrap').classList.add('hidden');
      document.getElementById('profileWrap').classList.remove('flex');
      start(mode||'Easy');
    };

    // ====== Start / Next ======
    function start(m){
      mode=m||mode; modeLabel.textContent=mode;
      paper=pickByLevel(mode); idx=0; score=0; streak=0;
      scoreEl.textContent=score; streakEl.textContent=streak+'üî•';
      qTotalEl.textContent=paper.length; qIndexEl.textContent=0;
      next(); audio.beep('ok'); document.getElementById('card').classList.add('flash');
      setTimeout(()=>document.getElementById('card').classList.remove('flash'),500);
    }

    function next(){
      clearInterval(timer); feedback.classList.add('hidden'); actions.classList.remove('hidden');
      if(idx>=paper.length){ endGame(); return; }
      const q=paper[idx]; answered=false; tLeft=45; updateTimer();
      stemEl.textContent = q.stem + ' ‚è±Ô∏è';
      qIndexEl.textContent = (idx+1);
      renderChoices(q);
      timer = setInterval(()=>{ tLeft--; updateTimer(); if(tLeft<=0){ clearInterval(timer); lockChoices(); reveal(false, null, q); } },1000);
    }

    function renderChoices(q){
      choicesEl.innerHTML='';
      q.choices.forEach((c,i)=>{
        const btn=document.createElement('button');
        btn.className='btn choice text-left'; btn.innerHTML = `<span class="font-bold mr-2">${String.fromCharCode(65+i)}.</span> ${c}`;
        btn.addEventListener('click',()=> choose(i,q,btn));
        choicesEl.appendChild(btn);
      });
      hintBtn.onclick=()=> showHint(q);
      whyBtn.onclick=()=> askWhy();
    }

    function updateTimer(){
      secLeft.textContent=tLeft; const pct=Math.max(0,(tLeft/45)*100); timerBar.style.width=pct+'%';
      timerBar.style.background = `linear-gradient(90deg, var(--sec), ${pct>66?'#34d399':pct>33?'#f59e0b':'#ef4444'})`;
    }

    function choose(i,q,btn){ if(answered) return; answered=true; clearInterval(timer); const correct = (i===q.answer); lockChoices();
      if(correct){ btn.classList.add('correct'); const pts=Math.max(0, Math.round(1000*(tLeft/45))); score+=pts; streak++; audio.beep('ok'); resultText.innerHTML=`‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! +${pts} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`; }
      else{ btn.classList.add('wrong'); streak=0; audio.boom(); resultText.innerHTML='‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏•‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á'; }
      scoreEl.textContent=score; streakEl.textContent=streak+'üî•';
      reveal(true, i, q);
    }

    function lockChoices(){
      [...choicesEl.children].forEach((b,ix)=>{ b.disabled=true; const q=paper[idx]; if(ix===q.answer) b.classList.add('correct'); });
    }

    function showHint(q){ alert('‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ:
'+q.hint); }
    function askWhy(){ const ans = prompt('‡πÇ‡∏´‡∏°‡∏î‡πÇ‡∏™‡∏Å‡∏£‡∏≤‡∏ï‡∏¥‡∏™ ü§î
‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ? ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô/‡∏™‡∏π‡∏ï‡∏£'); if(ans!==null){ alert('‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏ß‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚ú®'); } }

    function reveal(nextable, chosenIndex, q){
      explain.innerHTML = q.explain;
      refEl.textContent = '‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á: '+ q.ref;
      feedback.classList.remove('hidden');
      nextBtn.onclick=()=>{ idx++; next(); };
    }

    function endGame(){
      stemEl.innerHTML = `‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß! üéâ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ <b>${score}</b> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
      choicesEl.innerHTML=''; actions.classList.add('hidden'); feedback.classList.add('hidden');
      const praise = score>8000? '‡πÄ‡∏ó‡∏û‡∏ß‡∏á‡∏à‡∏£! üî•': score>5000? '‡πÅ‡∏ô‡πà‡∏ô‡∏°‡∏≤‡∏Å üí™': score>2500? '‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏™‡∏ß‡∏¢ ‚ú®': '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡∏µ ‡∏•‡∏∏‡∏¢‡∏ï‡πà‡∏≠! üöÄ';
      const share = document.createElement('div'); share.className='mt-4 text-center';
      share.innerHTML = `<div class="text-xl font-bold mb-2">${praise}</div>
        <button class="btn" onclick="navigator.clipboard.writeText('‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ '+${score}+ ' ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÉ‡∏ô‡πÄ‡∏Å‡∏° EVSE Quiz!')">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ‡∏≠‡∏ß‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô üòé</button>
        <div class="text-xs opacity-70 mt-2" id="submitStatus">‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‚Ä¶</div>`;
      choicesEl.appendChild(share);
      // ‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ Google Sheets
      const payload = buildSubmissionPayload();
      submitToSheet(payload);
    }

    document.getElementById('resetBtn').addEventListener('click',()=>{ start(mode==='‚Äî'?'Easy':mode); });

    // ====== Build + Submit payload ======
    function buildSubmissionPayload(){
      const p = getProfile();
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const answers = [];
      // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô (paper)
      for(let i=0;i<paper.length;i++){
        const q = paper[i];
        answers.push({ no:i+1, stem:q.stem, choices:q.choices, correctIndex:q.answer });
      }
      return {
        ts: new Date().toISOString(), tz,
        player: {name:p.name||'', org:p.org||'', email:p.email||'', phone:p.phone||''},
        game: {mode: mode, total: paper.length, score},
        device: {ua: navigator.userAgent, lang: navigator.language, w:innerWidth, h:innerHeight},
        answers
      };
    }

    async function submitToSheet(payload){
      const status = document.getElementById('submitStatus');
      if(!SHEET_WEBAPP_URL){ status && (status.textContent='‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Web App URL'); return; }
      try{
        await fetch(SHEET_WEBAPP_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
        status && (status.textContent='‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úÖ');
      }catch(e){ status && (status.textContent='‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‚ö†Ô∏è ‡∏ï‡∏£‡∏ß‡∏à URL/‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå'); }
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>‡∏û‡∏•‡∏¥‡∏Å‡πÇ‡∏â‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏î‡πâ‡∏ß‡∏¢ AI ‚Äî ‡∏ã‡πà‡∏≠‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥ (MEA‚ÄëSPU) Quiz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--pri:#7c3aed;--sec:#22d3ee;--ok:#10b981;--bad:#ef4444;--bg:#0b1020}
    html,body{height:100%}
    body{font-family:'Kanit',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:radial-gradient(1200px 600px at 10% -10%,#1f1455 0%,#0b1020 60%,#050812 100%) fixed;color:#e6e9f5}
    .glass{backdrop-filter: blur(10px); background:linear-gradient(180deg,rgba(255,255,255,0.08),rgba(255,255,255,0.04)); border:1px solid rgba(255,255,255,0.12)}
    .btn{display:block;width:100%;padding:14px 18px;border-radius:1rem;border:1px solid rgba(255,255,255,.2);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.04));}
    .btn:hover{transform:translateY(-1px);}
    .choice{transition:transform .08s ease, background .2s ease}
    .choice.correct{background:linear-gradient(180deg, rgba(16,185,129,.25), rgba(16,185,129,.15)); border-color: rgba(16,185,129,.6)}
    .choice.wrong{background:linear-gradient(180deg, rgba(239,68,68,.25), rgba(239,68,68,.15)); border-color: rgba(239,68,68,.6)}
    .timerbar{height:10px;border-radius:999px;background:linear-gradient(90deg,var(--sec),#34d399,#f59e0b,#ef4444)}
    .flash{animation:flash .5s ease}
    @keyframes flash{0%{box-shadow:0 0 0 0 rgba(124,58,237,.8)}100%{box-shadow:0 0 0 20px rgba(124,58,237,0)}}
  </style>
</head>
<body>
  <div class="min-h-full p-4 sm:p-6">
    <header class="glass rounded-2xl p-4 sm:p-6 mb-4 sm:mb-6">
      <div class="flex items-center justify-between gap-3">
        <div class="flex-1">
          <h1 class="text-2xl sm:text-4xl font-extrabold leading-tight">
            ‡∏û‡∏•‡∏¥‡∏Å‡πÇ‡∏â‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏î‡πâ‡∏ß‡∏¢ <span class="text-[var(--sec)]">AI</span> ‚Äî ‡∏ã‡πà‡∏≠‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥
          </h1>
          <p class="text-sm sm:text-base opacity-80 mt-1">Showcase (MEA‚ÄëSPU) ‚Ä¢ ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ <strong>‡∏ú‡∏®.‡∏î‡∏£.‡∏†‡∏£‡∏ä‡∏±‡∏¢ ‡∏à‡∏π‡∏≠‡∏ô‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡∏Å‡∏∏‡∏•</strong></p>
        </div>
        <div class="shrink-0 text-right">
          <button id="musicToggle" class="btn text-sm sm:text-base">üîä ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á</button>
          <button id="sfxToggle" class="btn mt-2 text-sm sm:text-base">üéß ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå</button>
        </div>
      </div>
    </header>

    <main class="grid lg:grid-cols-3 gap-4 sm:gap-6">
      <!-- Left: Controls -->
      <section class="glass rounded-2xl p-4 sm:p-6 lg:col-span-1">
        <h2 class="text-xl sm:text-2xl font-bold mb-2">üéÆ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ</h2>
        <p class="text-sm opacity-80 mb-4">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Ä¢ ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ <b>45 ‡∏ß‡∏¥</b> ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠ ‚Ä¢ ‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏Å‡∏•‡πâ <b>1,000</b> ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠</p>

        <label class="block text-base mb-2">‡πÇ‡∏´‡∏°‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå</label>
        <div class="grid grid-cols-2 gap-2">
          <button data-mode="Easy" class="btn mode">üç≠ Easy (5 ‡∏Ç‡πâ‡∏≠)</button>
          <button data-mode="Medium" class="btn mode">‚öôÔ∏è Medium (5 ‡∏Ç‡πâ‡∏≠)</button>
          <button data-mode="Hard" class="btn mode">üõ†Ô∏è Hard (5 ‡∏Ç‡πâ‡∏≠)</button>
          <button data-mode="Mixed" class="btn mode">üåÄ Mixed (10 ‡∏Ç‡πâ‡∏≠)</button>
        </div>

        <div class="mt-6">
          <label class="block text-base mb-2">‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö‡πÇ‡∏™‡∏Å‡∏£‡∏≤‡∏ï‡∏¥‡∏™ (Socrates)</label>
          <p class="text-sm opacity-80">‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡∏ß‡πà‡∏≤ <em>‚Äú‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ?‚Äù</em> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏ß‡∏ô‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</p>
        </div>

        <div class="mt-6">
          <h3 class="font-bold mb-2">üèÜ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
          <div class="grid grid-cols-2 gap-2 text-center">
            <div class="glass rounded-xl p-3">
              <div class="text-3xl font-extrabold" id="score">0</div>
              <div class="text-xs opacity-80">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
            </div>
            <div class="glass rounded-xl p-3">
              <div class="text-3xl font-extrabold" id="streak">0üî•</div>
              <div class="text-xs opacity-80">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</div>
            </div>
          </div>
          <button id="resetBtn" class="btn mt-3">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏° ‚ôªÔ∏è</button>
        </div>

        <div class="mt-6">
          <h3 class="font-bold mb-2">üìö ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</h3>
          <ul class="text-sm leading-relaxed list-disc ml-5 opacity-90">
            <li>‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á EVSE: <b>MPESTD‚Äë001:2563</b> (MEA/PEA/‡∏Å‡∏Å‡∏û)</li>
            <li>‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏≠‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏∏: <b>MEA 2560</b></li>
            <li>IEC 61851, IEC 62196, IEC 62423 (RCD Type B), IEC 62955 (RDC‚ÄëDD)</li>
            <li>‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢ <b>IEC 01 (THW)</b> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏†‡∏≤‡∏Ñ‡∏™‡∏ô‡∏≤‡∏°</li>
          </ul>
        </div>
      </section>

      <!-- Right: Gameplay -->
      <section class="glass rounded-2xl p-4 sm:p-6 lg:col-span-2">
        <div class="flex items-center justify-between gap-3 mb-3">
          <div class="flex items-center gap-3">
            <span class="text-sm opacity-80">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà</span>
            <span id="qIndex" class="text-2xl font-extrabold">0</span>
            <span class="opacity-60">/</span>
            <span id="qTotal" class="text-xl">0</span>
          </div>
          <div class="flex-1 mx-4">
            <div class="w-full bg-white/10 rounded-full overflow-hidden">
              <div id="timerBar" class="timerbar" style="width:100%"></div>
            </div>
            <div class="text-right text-xs opacity-70 mt-1"><span id="secLeft">45</span>s</div>
          </div>
          <div class="text-right">
            <div class="text-xs opacity-70">‡πÇ‡∏´‡∏°‡∏î</div>
            <div id="modeLabel" class="text-lg font-bold">‚Äî</div>
          </div>
        </div>

        <div id="card" class="rounded-2xl p-4 sm:p-6 bg-white/5">
          <div id="stemWrap">
            <h2 id="stem" class="text-xl sm:text-2xl font-bold leading-snug">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ‚ú®</h2>
            <p class="text-sm opacity-80 mt-2">‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô MEA ‚Ä¢ IEC ‚Ä¢ IEEE + ‡∏†‡∏≤‡∏Ñ‡∏™‡∏ô‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á ‚Äî ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Wall Charger ‡πÇ‡∏´‡∏°‡∏î 3 (1‡πÄ‡∏ü‡∏™ ‚â§7.4kW, 3‡πÄ‡∏ü‡∏™ ‚â§11kW)</p>
          </div>

          <div id="choices" class="grid gap-2 mt-4"></div>

          <div id="actions" class="mt-4 hidden">
            <button id="hintBtn" class="btn">üí° ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ</button>
            <button id="whyBtn" class="btn mt-2">ü§î ‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ?</button>
          </div>

          <div id="feedback" class="mt-4 hidden">
            <div id="resultText" class="text-lg font-bold"></div>
            <div id="explain" class="text-sm opacity-90 mt-2 leading-relaxed"></div>
            <div id="ref" class="text-xs opacity-70 mt-1"></div>
            <button id="nextBtn" class="btn mt-4">‚û°Ô∏è ‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-center opacity-70 text-xs">
      ¬© 2025 MEA‚ÄëSPU ‚Ä¢ Active Learning with AI ‚Äî Designed for Thai Gen Z üì±‚ö°
    </footer>
  </div>

  <!-- PROFILE (Google Sheets) -->
  <div class="fixed inset-0 z-50 hidden items-center justify-center p-4" id="profileWrap">
    <div class="glass max-w-xl w-full rounded-2xl p-5">
      <h2 class="text-2xl font-extrabold mb-1">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô & ‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°</h2>
      <p class="opacity-80 text-sm mb-3">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡∏á Google Sheets (MEA‚ÄëSPU)</p>
      <div class="grid gap-2">
        <label class="text-sm">‡∏ä‡∏∑‡πà‡∏≠‚Äë‡∏™‡∏Å‡∏∏‡∏• <input id="pf_name" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></label>
        <label class="text-sm">‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô <input id="pf_org" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"></label>
        <label class="text-sm">‡∏≠‡∏µ‡πÄ‡∏°‡∏• <input id="pf_email" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="name@example.com"></label>
        <label class="text-sm">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå <input id="pf_phone" class="w-full mt-1 rounded-xl p-2 bg-white/10 border border-white/20" placeholder="08x-xxx-xxxx"></label>
        <label class="text-sm flex items-center gap-2"><input type="checkbox" id="pf_consent" class="scale-125"> ‚úÖ ‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</label>
      </div>
      <div class="grid grid-cols-2 gap-2 mt-4">
        <button class="btn" id="pf_cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button class="btn" id="pf_save">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å & ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
      </div>
      <p class="text-xs opacity-60 mt-3">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Apps Script Web App URL ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ <code>SHEET_WEBAPP_URL</code> ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ</p>
    </div>
  </div>

  <script>
    // ====== Google Sheets endpoint ======
    // üëâ ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå Web App ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡πÄ‡∏õ‡∏£‡∏î‡∏ä‡∏µ‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ /exec)
    const SHEET_WEBAPP_URL = ""; // e.g. "https://script.google.com/macros/s/AKfycbx.../exec"

    // ====== Simple WebAudio background music & SFX ======
    const audio = {
      ctx:null, musicGain:null, sfxGain:null, musicOn:true, sfxOn:true,
      ensure(){ if(!this.ctx){ this.ctx = new (window.AudioContext||window.webkitAudioContext)(); this.musicGain=this.ctx.createGain(); this.sfxGain=this.ctx.createGain(); this.musicGain.gain.value=.25; this.sfxGain.gain.value=.6; this.musicGain.connect(this.ctx.destination); this.sfxGain.connect(this.ctx.destination);} },
      beep(type='ok'){ if(!this.sfxOn) return; this.ensure(); const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.connect(g); g.connect(this.sfxGain); o.type= type==='ok'? 'triangle':'square'; o.frequency.setValueAtTime(type==='ok'?880:220,this.ctx.currentTime); g.gain.setValueAtTime(.001,this.ctx.currentTime); g.gain.exponentialRampToValueAtTime(.5,this.ctx.currentTime+.01); g.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.2); o.start(); o.stop(this.ctx.currentTime+.21); },
      boom(){ if(!this.sfxOn) return; this.ensure(); const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.connect(g); g.connect(this.sfxGain); o.type='sawtooth'; o.frequency.setValueAtTime(200,this.ctx.currentTime); o.frequency.exponentialRampToValueAtTime(60,this.ctx.currentTime+.3); g.gain.setValueAtTime(.6,this.ctx.currentTime); g.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.35); o.start(); o.stop(this.ctx.currentTime+.36); },
      music(){ if(!this.musicOn) return; this.ensure(); // chill arpeggio loop
        const root=220; const seq=[0,4,7,12,7,4]; let i=0; const play=()=>{ if(!this.musicOn) return; const now=this.ctx.currentTime; const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.type='sine'; o.frequency.value=root*Math.pow(2,seq[i%seq.length]/12); g.gain.value=.0001; o.connect(g); g.connect(this.musicGain); o.start(now); g.gain.exponentialRampToValueAtTime(.08, now+.01); g.gain.exponentialRampToValueAtTime(.0001, now+.45); o.stop(now+.5); i++; setTimeout(play, 480); }; play(); }
    };

    const musicBtn=document.getElementById('musicToggle');
    const sfxBtn=document.getElementById('sfxToggle');
    musicBtn.addEventListener('click',()=>{ audio.musicOn=!audio.musicOn; musicBtn.textContent = audio.musicOn? 'üîä ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á':'üîá ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á'; if(audio.musicOn){ audio.music(); }});
    sfxBtn.addEventListener('click',()=>{ audio.sfxOn=!audio.sfxOn; sfxBtn.textContent = audio.sfxOn? 'üéß ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå':'üö´ ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå'; });
    // kick music on first interaction
    window.addEventListener('pointerdown',()=>{ audio.music(); },{once:true});

    // ====== Quiz Data (Thai) ======
    // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠ = Math.round(1000 * (‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠/45))
    const QUESTIONS = [
      // Easy (5)
      {id:'E1', level:'Easy', stem:'‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏ü‡πÉ‡∏´‡πâ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á RCD ‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å?', choices:['Type A','Type B','Type AC','‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô'], answer:1, hint:'‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ï‡∏£‡∏á‡∏£‡∏±‡πà‡∏ß‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö DC', explain:'‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ RCD Type B (IŒîn ‚â§ 30 mA) ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Type A/F ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö RDC‚ÄëDD ‚â•6 mA ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠ Type B', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.1 ‡∏Ç) ; IEC 62423, IEC 62955'},
      {id:'E2', level:'Easy', stem:'‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î 2/3 ‡∏Ñ‡∏ß‡∏£‡∏™‡∏π‡∏á‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?', choices:['0.3‚Äì0.6 ‡∏°.','‚â•0.75 ‡∏°. ‡πÅ‡∏ï‡πà ‚â§1.2 ‡∏°.','‚â•1.5 ‡∏°.','‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î'], answer:1, hint:'‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', explain:'‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏π‡∏á‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏à‡∏≠‡∏î‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 0.75 ‡πÄ‡∏°‡∏ï‡∏£ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1.2 ‡πÄ‡∏°‡∏ï‡∏£', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.7, 5.15'},
      {id:'E3', level:'Easy', stem:'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏™‡∏≤‡∏¢‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏∏‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (AC) ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£?', choices:['5 ‡∏°.','7.5 ‡∏°.','10 ‡∏°.','‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏°.'], answer:1, hint:'‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô', explain:'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏™‡∏≤‡∏¢‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡∏¥‡∏ô 7.5 ‡πÄ‡∏°‡∏ï‡∏£', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 6.5 / MEA 5.14'},
      {id:'E4', level:'Easy', stem:'‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏π‡∏ì‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['√ó1.10','√ó1.25','√ó1.50','√ó2.00'], answer:1, hint:'‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢ EVSE', explain:'‡∏™‡∏≤‡∏¢‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 1.25 ‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ EVSE', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.4 / MEA 5.3'},
      {id:'E5', level:'Easy', stem:'‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏™‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EVSE ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏î?', choices:['‡πÄ‡∏î‡∏¥‡∏ô‡∏•‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏¢','‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡∏ù‡∏±‡∏á‡∏î‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á','‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ï‡πâ‡∏û‡∏£‡∏°','‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ô‡πÄ‡∏û‡∏î‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠'], answer:1, hint:'‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', explain:'‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡∏ù‡∏±‡∏á‡∏î‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.8'},

      // Medium (5)
      {id:'M1', level:'Medium', stem:'‡∏ñ‡πâ‡∏≤ EVSE 1 ‡πÄ‡∏ü‡∏™ 7.4 kW, pf‚âà1 ‡∏ó‡∏µ‡πà 230 V ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['16 A','25 A','32 A','40 A'], answer:2, hint:'I = P/(‚àö3 V LL pf) ‡πÉ‡∏ä‡πâ 1 ‡πÄ‡∏ü‡∏™ = P/(V pf)', explain:'1 ‡πÄ‡∏ü‡∏™: I=P/(V¬∑pf)=7400/(230√ó1) ‚âà 32.17 A ‚áí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î 32 A', ref:'‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á 1 ‡πÄ‡∏ü‡∏™ / pf ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÅ‡∏°‡πâ pf‚âà1'},
      {id:'M2', level:'Medium', stem:'‡∏à‡∏≤‡∏Å M1 ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î IEC 01 (THW) ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á ‡∏Ç‡∏ô‡∏≤‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏µ‡πà‡∏ï‡∏£.‡∏°‡∏°. (‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà2)?', choices:['2.5 ‡∏ï‡∏£.‡∏°‡∏°. (21A)','4 ‡∏ï‡∏£.‡∏°‡∏°. (28A)','6 ‡∏ï‡∏£.‡∏°‡∏°. (36A)','10 ‡∏ï‡∏£.‡∏°‡∏°. (50A)'], answer:3, hint:'‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏° √ó1.25 ‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á', explain:'I‡∏à‡∏£‡∏¥‡∏á‚âà32 A ‚áí ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏≤‡∏¢ ‚â•1.25√ó32 ‚âà 40 A. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01 (‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á) 6 ‡∏ï‡∏£.‡∏°‡∏°. ~36A ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏≠ ‚áí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 10 ‡∏ï‡∏£.‡∏°‡∏°. 50A ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå', ref:'‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01 (THW) ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà2 ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á'},
      {id:'M3', level:'Medium', stem:'‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Demand factor ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['0.8','0.9','1.0','‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö'], answer:2, hint:'‡πÇ‡∏´‡∏•‡∏î‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°', explain:'‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Demand factor = 1 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢ EVSE', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.5 / MEA 5.4'},
      {id:'M4', level:'Medium', stem:'‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏¢‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≥‡∏à‡∏≤‡∏Å ‡∏Å‡∏ü‡∏ô. ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EV Load ‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏î?', choices:['TN‚ÄëC','TN‚ÄëC‚ÄëS ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°','TT (‡πÅ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°)','IT'], answer:2, hint:'‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ô‡∏¥‡∏ß‡∏ó‡∏£‡∏±‡∏•', explain:'‡∏Å‡∏£‡∏ì‡∏µ‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≥‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡πÅ‡∏ö‡∏ö TT ‡πÅ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏≠‡∏¥‡∏™‡∏£‡∏∞', ref:'MEA 5.11.1 ; MPESTD‚Äë001 ‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å ‡∏Ç.'},
      {id:'M5', level:'Medium', stem:'‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö TT ‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏Ñ‡∏ß‡∏£‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', choices:['0.5 ‡∏°.','1.0 ‡∏°.','2.0 ‡∏°.','5.0 ‡∏°.'], answer:2, hint:'‡∏î‡∏π‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Earthing TT', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 2.0 ‡πÄ‡∏°‡∏ï‡∏£', ref:'MEA 5.11.1 ; MPESTD‚Äë001 ‡∏Ç‡πâ‡∏≠ 4.2.1 (1) ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô ‚â•2.0 ‡∏°.'},

      // Hard (5)
      {id:'H1', level:'Hard', stem:'‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á RCD Type B ‡∏ã‡πâ‡∏≠‡∏ô‡πÉ‡∏ï‡πâ‡πÄ‡∏°‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ RCD Type A ‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', choices:['‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ','‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡πÉ‡∏ï‡πâ RCD ‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏°‡∏ô','‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤ IŒîn ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô','‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏´‡∏•‡∏î <32A'], answer:1, hint:'‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á RCD ‡∏ï‡πà‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î', explain:'‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤ RCD Type B ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏ß‡∏á‡∏à‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ RCD Type ‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏ô‡∏±‡πâ‡∏ô ‡πÜ', ref:'MPESTD‚Äë001:2563 ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ ‡∏Ç‡πâ‡∏≠ 3.1 ‡∏Ç) (3.)'},
      {id:'H2', level:'Hard', stem:'‡∏Å‡∏£‡∏ì‡∏µ TN‚ÄëC‚ÄëS ‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏Ç‡πâ‡∏≠‡πÉ‡∏î ‚Äú‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‚Äù ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö?', choices:['‡∏Ñ‡∏∏‡∏° touch voltage >70V ‡∏ï‡∏±‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5s','‡∏•‡∏î‡∏Ñ‡πà‡∏≤ Rearth ‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î','‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á U/O‚ÄëV protection ‡πÅ‡∏ó‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)','‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°'], answer:3, hint:'‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Ñ‡∏∑‡∏≠‚Ä¶', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠ 4.2.2 ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô‡∏î‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5s ‡∏Ø‡∏•‡∏Ø ‡∏Å‡∏≤‡∏£ ‚Äú‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‚Äù ‡∏Ç‡∏±‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 4.2.2'},
      {id:'H3', level:'Hard', stem:'‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á RCD ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô/‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏ï‡∏≤‡∏° MPESTD‚Äë001 ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏∏‡∏Å‡∏Å‡∏µ‡πà‡πÄ‡∏î‡∏∑‡∏≠‡∏ô?', choices:['‡∏ó‡∏∏‡∏Å 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ó‡∏∏‡∏Å 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ó‡∏∏‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ó‡∏∏‡∏Å 12 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô'], answer:2, hint:'MPESTD vs MEA ‡∏Ñ‡∏ô‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏ö‡∏ó', explain:'MPESTD‚Äë001 ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏∏‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏õ‡∏∏‡πà‡∏° Test) ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ MEA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÄ‡∏ä‡∏¥‡∏á‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.11 ; MEA 5.20'},
      {id:'H4', level:'Hard', stem:'Wall Charger ‡πÇ‡∏´‡∏°‡∏î 3 ‡∏™‡∏≤‡∏°‡πÄ‡∏ü‡∏™ 11 kW ‡∏ó‡∏µ‡πà 400 V, pf‚âà1 ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ï‡πà‡∏≠‡πÄ‡∏ü‡∏™‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏£‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á?', choices:['I‚âà16 A/phase, MCB 16 A','I‚âà32 A/phase, MCB 32 A','I‚âà20 A/phase, MCB 20 A','I‚âà25 A/phase, MCB 25 A'], answer:0, hint:'‡∏™‡∏≤‡∏°‡πÄ‡∏ü‡∏™‡πÉ‡∏ä‡πâ I=P/(‚àö3¬∑V¬∑pf)', explain:'I = 11000/(‚àö3√ó400√ó1) ‚âà 15.9 A ‚áí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏û‡∏¥‡∏Å‡∏±‡∏î 16 A', ref:'‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≤‡∏°‡πÄ‡∏ü‡∏™ + pf ‡∏£‡∏ß‡∏°‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£'},
      {id:'H5', level:'Hard', stem:'‡∏à‡∏≤‡∏Å H4 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢ IEC 01 (THW) ‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠?', choices:['2.5 ‡∏ï‡∏£.‡∏°‡∏°. (21A) ‡∏ú‡πà‡∏≤‡∏ô √ó1.25','4 ‡∏ï‡∏£.‡∏°‡∏°. (28A) ‡∏ú‡πà‡∏≤‡∏ô √ó1.25','1.5 ‡∏ï‡∏£.‡∏°‡∏°. (15A) ‡∏û‡∏≠','6 ‡∏ï‡∏£.‡∏°‡∏°. (36A) ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô'], answer:1, hint:'‡∏Ñ‡∏¥‡∏î I‡∏à‡∏£‡∏¥‡∏á√ó1.25 ‡∏Å‡πà‡∏≠‡∏ô', explain:'I‡∏à‡∏£‡∏¥‡∏á‚âà16 A ‚áí ‡∏ï‡πâ‡∏≠‡∏á ‚â•1.25√ó16=20 A. 2.5 ‡∏ï‡∏£.‡∏°‡∏°. 21A ‡∏û‡∏≠‡πÄ‡∏ú‡∏∑‡πà‡∏≠ ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠ margin/‡∏™‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á ‡∏ô‡∏¥‡∏¢‡∏° 4 ‡∏ï‡∏£.‡∏°‡∏°. 28A ‡∏à‡∏∂‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏ß‡πà‡∏≤', ref:'‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01 (THW) ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà2 (‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡πà‡∏≠‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á)'},

      // Mixed pool (10)
      {id:'X1', level:'Mixed', stem:'‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô surge ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', choices:['‡∏Ñ‡∏ß‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏µ','‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô','‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á','‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á'], answer:0, hint:'‡∏™‡∏†‡∏≤‡∏û‡∏ü‡πâ‡∏≤‡∏ú‡πà‡∏≤/‡πÄ‡∏´‡∏ô‡∏µ‡πà‡∏¢‡∏ß‡∏ô‡∏≥', explain:'‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ç‡∏ì‡∏∞ (Surge protection) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 6.6'},
      {id:'X2', level:'Mixed', stem:'‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏´‡∏±‡∏ß‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?', choices:['‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏û‡∏≠','‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ OCP & RCD ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≠‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö built‚Äëin','‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏ß‡∏™‡πå‡∏£‡∏ß‡∏°','‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'], answer:1, hint:'‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á selectivity', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏Å‡∏¥‡∏ô‡πÅ‡∏•‡∏∞ RCD ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏à‡πà‡∏≤‡∏¢ ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢‡∏î‡πâ‡∏ß‡∏¢', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 6.2'},
      {id:'X3', level:'Mixed', stem:'‡πÇ‡∏´‡∏°‡∏î 2 ‡πÉ‡∏ä‡πâ‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏û‡∏Å‡∏û‡∏≤‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', choices:['‡πÑ‡∏î‡πâ','‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ','‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤ ‚â§10A','‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏ä‡πà‡∏≤‡∏á'], answer:1, hint:'portable socket‚Äëoutlet?', explain:'‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏ä‡∏ô‡∏¥‡∏î‡∏´‡∏¢‡∏¥‡∏ö‡∏¢‡∏Å‡πÑ‡∏î‡πâ (Portable socket‚Äëoutlet) ‡∏à‡πà‡∏≤‡∏¢ EVSE', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 5.4'},
      {id:'X4', level:'Mixed', stem:'‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‚ÄúEV connecting point ‚Ä¶A, ‚Ä¶kW (MAX.)‚Äù ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡πÉ‡∏î?', choices:['‡πÇ‡∏´‡∏°‡∏î 2 ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö','‡πÇ‡∏´‡∏°‡∏î 4 DC','‡∏´‡∏°‡πâ‡∏≠‡πÅ‡∏õ‡∏•‡∏á','‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á'], answer:0, hint:'‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏ô‡∏õ‡πâ‡∏≤‡∏¢', explain:'‡πÄ‡∏ï‡πâ‡∏≤‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î 2 ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 10/‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà 4', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 5.5‚Äë5.6'},
      {id:'X5', level:'Mixed', stem:'‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏™‡∏≤‡∏¢‡πÄ‡∏Å‡∏≤‡∏∞‡∏ú‡∏ô‡∏±‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏á‡∏à‡∏£ (derating) ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?', choices:['2 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.85','3 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.95','4 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.90','9‚Äë20 ‡∏ß‡∏á‡∏à‡∏£ ‡πÉ‡∏ä‡πâ 0.90'], answer:0, hint:'‡∏à‡∏≥‡∏ï‡∏≤‡∏£‡∏≤‡∏á 1', explain:'‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: 2 ‡∏ß‡∏á‡∏à‡∏£ 0.85; 3 ‡∏ß‡∏á‡∏à‡∏£ 0.79; 4 ‡∏ß‡∏á‡∏à‡∏£ 0.75; 9‚Äë20 ‡∏ß‡∏á‡∏à‡∏£ 0.70', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.9.2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà 1'},
      {id:'X6', level:'Mixed', stem:'‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ TN‚ÄëC‚ÄëS ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥ TT ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ EVSE ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡πÇ‡∏•‡∏´‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≠‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢?', choices:['1.0 ‡∏°.','2.5 ‡∏°.','5.0 ‡∏°.','‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î'], answer:1, hint:'touch potential', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡πÇ‡∏•‡∏´‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≠‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‚â•2.5 ‡∏°. ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏¥‡∏ô‡∏´‡πà‡∏≤‡∏á ‚â•2.0 ‡∏°.', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 4.2.1 (1) ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà 9'},
      {id:'X7', level:'Mixed', stem:'‡πÇ‡∏´‡∏•‡∏î EVSE ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Demand factor?', choices:['0.5','0.75','1.0','‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÄ‡∏ô‡∏≠‡∏£‡πå'], answer:2, hint:'‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢', explain:'‡∏Å‡∏≥‡∏´‡∏ô‡∏î Demand factor = 1 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≤‡∏¢‡∏õ‡πâ‡∏≠‡∏ô/‡∏™‡∏≤‡∏¢‡πÄ‡∏°‡∏ô', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 3.5'},
      {id:'X8', level:'Mixed', stem:'IC‚ÄëCPD ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î 2 ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà?', choices:['‡πÅ‡∏Ñ‡πà‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤','‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏™‡∏≤‡∏¢','‡∏ß‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô','‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡∏ô‡∏´‡∏°‡πâ‡∏≠‡πÅ‡∏õ‡∏•‡∏á'], answer:1, hint:'‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏° In‚Äëcable control and protection device', explain:'IC‚ÄëCPD ‡∏Ñ‡∏∑‡∏≠‡∏ä‡∏∏‡∏î‡∏™‡∏≤‡∏¢/‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÉ‡∏ô‡∏™‡∏≤‡∏¢ ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢', ref:'MPESTD‚Äë001:2563 ‡∏Ç‡πâ‡∏≠ 2.3, 2.7‚Äë2.8'},
      {id:'X9', level:'Mixed', stem:'EVSE ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?', choices:['‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô','‡∏Ñ‡∏ß‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°','‡πÉ‡∏ä‡πâ‡∏ã‡∏¥‡∏•‡∏¥‡πÇ‡∏Ñ‡∏ô‡∏û‡∏≠','‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á'], answer:1, hint:'‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°', ref:'MEA 5.16 ; MPESTD‚Äë001 ‡∏Ç‡πâ‡∏≠ 3.10'},
      {id:'X10', level:'Mixed', stem:'‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏£‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ ‚Äú‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™‚Äù ‡∏´‡∏•‡∏±‡∏Å‡πÑ‡∏´‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?', choices:['‡∏î‡∏π‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô','‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤','‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™ I ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á + ‡πÄ‡∏ú‡∏∑‡πà‡∏≠ √ó1.25','‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏±‡∏ô‡πÇ‡∏¢‡∏Å'], answer:2, hint:'‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏£‡∏¥‡∏á', explain:'‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏Ç‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏ã‡∏∂‡πà‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å I‡∏à‡∏£‡∏¥‡∏á√ó1.25 ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01)', ref:'‡πÅ‡∏ô‡∏ß‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ß‡∏á‡∏à‡∏£‡∏¢‡πà‡∏≠‡∏¢ EVSE ‡∏ï‡∏≤‡∏° MPESTD & ‡∏ï‡∏≤‡∏£‡∏≤‡∏á IEC 01'}
    ];

    // ====== Utility ======
    function pickByLevel(level){
      if(level==='Mixed'){
        const pool=QUESTIONS.filter(q=>q.level!=='Easy'&&q.level!=='Medium'&&q.level!=='Hard');
        // ‡∏´‡∏≤‡∏Å pool ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö 10 ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠
        const base = pool.length>=10? pool : [...QUESTIONS];
        return shuffle(base).slice(0,10);
      }
      return QUESTIONS.filter(q=>q.level===level).slice(0,5);
    }
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }

    // ====== Game State ======
    let mode='‚Äî', paper=[], idx=0, timer=null, tLeft=45, score=0, streak=0, answered=false;

    const qIndexEl=document.getElementById('qIndex');
    const qTotalEl=document.getElementById('qTotal');
    const modeLabel=document.getElementById('modeLabel');
    const timerBar=document.getElementById('timerBar');
    const secLeft=document.getElementById('secLeft');
    const stemEl=document.getElementById('stem');
    const choicesEl=document.getElementById('choices');
    const actions=document.getElementById('actions');
    const hintBtn=document.getElementById('hintBtn');
    const whyBtn=document.getElementById('whyBtn');
    const feedback=document.getElementById('feedback');
    const resultText=document.getElementById('resultText');
    const explain=document.getElementById('explain');
    const refEl=document.getElementById('ref');
    const nextBtn=document.getElementById('nextBtn');
    const scoreEl=document.getElementById('score');
    const streakEl=document.getElementById('streak');

    document.querySelectorAll('.mode').forEach(b=>b.addEventListener('click',()=>startOrProfile(b.dataset.mode)));

    // ====== Profile helpers ======
    function getProfile(){ try{ return JSON.parse(localStorage.getItem('mea_profile')||'{}'); }catch{ return {}; } }
    function saveProfile(p){ localStorage.setItem('mea_profile', JSON.stringify(p||{})); }
    function needProfile(){ const p=getProfile(); return !p.name || !p.org || !p.email || !p.consent; }
    function fillProfileForm(){ const p=getProfile(); const g=id=>document.getElementById(id); ['name','org','email','phone'].forEach(k=>{ const el=g('pf_'+k); if(el) el.value=p[k]||''; }); const c=g('pf_consent'); if(c) c.checked=!!p.consent; }
    function readProfileForm(){ const g=id=>document.getElementById(id); return { name:g('pf_name')?.value.trim(), org:g('pf_org')?.value.trim(), email:g('pf_email')?.value.trim(), phone:g('pf_phone')?.value.trim(), consent: !!g('pf_consent')?.checked }; }
    function validateProfile(p){ return !!(p.name && p.org && p.email && p.consent); }

    function startOrProfile(selMode){
      if(selMode) mode = selMode; // remember wished mode
      if(needProfile()){
        fillProfileForm();
        document.getElementById('profileWrap').classList.remove('hidden');
        document.getElementById('profileWrap').classList.add('flex');
      }else{
        start(mode);
      }
    }

    document.getElementById('pf_cancel').onclick=()=>{
      document.getElementById('profileWrap').classList.add('hidden');
      document.getElementById('profileWrap').classList.remove('flex');
    };
    document.getElementById('pf_save').onclick=()=>{
      const p=readProfileForm();
      if(!validateProfile(p)){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å ‡∏ä‡∏∑‡πà‡∏≠‚Äë‡∏™‡∏Å‡∏∏‡∏• / ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î / ‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡πä‡∏Å‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°'); return; }
      saveProfile(p);
      document.getElementById('profileWrap').classList.add('hidden');
      document.getElementById('profileWrap').classList.remove('flex');
      start(mode||'Easy');
    };

    // ====== Start / Next ======
    function start(m){
      mode=m||mode; modeLabel.textContent=mode;
      paper=pickByLevel(mode); idx=0; score=0; streak=0;
      scoreEl.textContent=score; streakEl.textContent=streak+'üî•';
      qTotalEl.textContent=paper.length; qIndexEl.textContent=0;
      next(); audio.beep('ok'); document.getElementById('card').classList.add('flash');
      setTimeout(()=>document.getElementById('card').classList.remove('flash'),500);
    }

    function next(){
      clearInterval(timer); feedback.classList.add('hidden'); actions.classList.remove('hidden');
      if(idx>=paper.length){ endGame(); return; }
      const q=paper[idx]; answered=false; tLeft=45; updateTimer();
      stemEl.textContent = q.stem + ' ‚è±Ô∏è';
      qIndexEl.textContent = (idx+1);
      renderChoices(q);
      timer = setInterval(()=>{ tLeft--; updateTimer(); if(tLeft<=0){ clearInterval(timer); lockChoices(); reveal(false, null, q); } },1000);
    }

    function renderChoices(q){
      choicesEl.innerHTML='';
      q.choices.forEach((c,i)=>{
        const btn=document.createElement('button');
        btn.className='btn choice text-left'; btn.innerHTML = `<span class="font-bold mr-2">${String.fromCharCode(65+i)}.</span> ${c}`;
        btn.addEventListener('click',()=> choose(i,q,btn));
        choicesEl.appendChild(btn);
      });
      hintBtn.onclick=()=> showHint(q);
      whyBtn.onclick=()=> askWhy();
    }

    function updateTimer(){
      secLeft.textContent=tLeft; const pct=Math.max(0,(tLeft/45)*100); timerBar.style.width=pct+'%';
      timerBar.style.background = `linear-gradient(90deg, var(--sec), ${pct>66?'#34d399':pct>33?'#f59e0b':'#ef4444'})`;
    }

    function choose(i,q,btn){ if(answered) return; answered=true; clearInterval(timer); const correct = (i===q.answer); lockChoices();
      if(correct){ btn.classList.add('correct'); const pts=Math.max(0, Math.round(1000*(tLeft/45))); score+=pts; streak++; audio.beep('ok'); resultText.innerHTML=`‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! +${pts} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`; }
      else{ btn.classList.add('wrong'); streak=0; audio.boom(); resultText.innerHTML='‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏•‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á'; }
      scoreEl.textContent=score; streakEl.textContent=streak+'üî•';
      reveal(true, i, q);
    }

    function lockChoices(){
      [...choicesEl.children].forEach((b,ix)=>{ b.disabled=true; const q=paper[idx]; if(ix===q.answer) b.classList.add('correct'); });
    }

    function showHint(q){ alert('‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ:
'+q.hint); }
    function askWhy(){ const ans = prompt('‡πÇ‡∏´‡∏°‡∏î‡πÇ‡∏™‡∏Å‡∏£‡∏≤‡∏ï‡∏¥‡∏™ ü§î
‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ? ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô/‡∏™‡∏π‡∏ï‡∏£'); if(ans!==null){ alert('‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏ß‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚ú®'); } }

    function reveal(nextable, chosenIndex, q){
      explain.innerHTML = q.explain;
      refEl.textContent = '‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á: '+ q.ref;
      feedback.classList.remove('hidden');
      nextBtn.onclick=()=>{ idx++; next(); };
    }

    function endGame(){
      stemEl.innerHTML = `‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß! üéâ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ <b>${score}</b> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
      choicesEl.innerHTML=''; actions.classList.add('hidden'); feedback.classList.add('hidden');
      const praise = score>8000? '‡πÄ‡∏ó‡∏û‡∏ß‡∏á‡∏à‡∏£! üî•': score>5000? '‡πÅ‡∏ô‡πà‡∏ô‡∏°‡∏≤‡∏Å üí™': score>2500? '‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏™‡∏ß‡∏¢ ‚ú®': '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡∏µ ‡∏•‡∏∏‡∏¢‡∏ï‡πà‡∏≠! üöÄ';
      const share = document.createElement('div'); share.className='mt-4 text-center';
      share.innerHTML = `<div class="text-xl font-bold mb-2">${praise}</div>
        <button class="btn" onclick="navigator.clipboard.writeText('‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ '+${score}+ ' ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÉ‡∏ô‡πÄ‡∏Å‡∏° EVSE Quiz!')">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ‡∏≠‡∏ß‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô üòé</button>
        <div class="text-xs opacity-70 mt-2" id="submitStatus">‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‚Ä¶</div>`;
      choicesEl.appendChild(share);
      // ‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ Google Sheets
      const payload = buildSubmissionPayload();
      submitToSheet(payload);
    }

    document.getElementById('resetBtn').addEventListener('click',()=>{ start(mode==='‚Äî'?'Easy':mode); });

    // ====== Build + Submit payload ======
    function buildSubmissionPayload(){
      const p = getProfile();
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const answers = [];
      // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô (paper)
      for(let i=0;i<paper.length;i++){
        const q = paper[i];
        answers.push({ no:i+1, stem:q.stem, choices:q.choices, correctIndex:q.answer });
      }
      return {
        ts: new Date().toISOString(), tz,
        player: {name:p.name||'', org:p.org||'', email:p.email||'', phone:p.phone||''},
        game: {mode: mode, total: paper.length, score},
        device: {ua: navigator.userAgent, lang: navigator.language, w:innerWidth, h:innerHeight},
        answers
      };
    }

    async function submitToSheet(payload){
      const status = document.getElementById('submitStatus');
      if(!SHEET_WEBAPP_URL){ status && (status.textContent='‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Web App URL'); return; }
      try{
        await fetch(SHEET_WEBAPP_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
        status && (status.textContent='‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚úÖ');
      }catch(e){ status && (status.textContent='‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‚ö†Ô∏è ‡∏ï‡∏£‡∏ß‡∏à URL/‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå'); }
    }
  </script>
</body>
</html>
